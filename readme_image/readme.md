#  旋转接头

## 1 界面显示内容

需显示：1min的温度、压力、伺服电机的转速、扭矩、（通过采集卡传递的）振动信号、功率；将以上数据存入文件Matlab需要的格式的文件

通信：需接收一个接头测试结果：好坏？

### 1.1 温度

modbusRTU：

先设置地址为01H的密码为1111，

![image-20230712210759702](F:\QT\project\swivelJoint20230801ni\readme_image\image-20230712210759702.png)

功能码为 03H、04H、10H 时，Modbus 通讯的数据格式为 32 位浮点数（IEEE-754）



#### 1.1.2程序设计思路

​		**对温度的显示，主要是实时刷新**：也就是开一个线程轮询某个寄存器：再把值发给ui显示。

### 1.2 压力

每秒15次

modbusRTU

| **寄存通讯器地址**  | **存放数据说明**                                             |      |      |
| ------------------- | ------------------------------------------------------------ | ---- | ---- |
| **0X0000**          | **路测量值高字**                                             |      |      |
| **0X0001**          | **路测量值的低字**                                           |      |      |
| **0X0002**          | **小数点位置**                                               |      |      |
| **0X0003**          | **保留**                                                     |      |      |
| **0x0004**          | **峰值测量的高字**                                           |      |      |
| **0x005**           | **峰值测量的低字**                                           |      |      |
| **0X0040**          | **第一个参数存放地址**                                       |      |      |
| **0X0041H~0X00FFH** | **为参数存放寄存器（每个参数的具体寄存器地址，参见参数说明表）** |      |      |

**注1：**寄存器地址0000H~001FH为测量值寄存器，依次存储着1~16路测量数据，每个测量值占用2个寄存器，共4个字节，此4个字节为带正负号的整型数据；寄存器地址0020H~002FH为1~16路小数点寄存器，例如0020H寄存器内容为1，表示第一路测量4个字节转化为10进制后，包含1位小数点，小数点范围为0~4。举例：假如接收到的测量寄存器数据为; 00 00  01 06   ,将四个字节16进制转化为10进制，为： 262 ，读出对应的小数点位数为2，则表示接收到的数据为2.62. 

**注2：**每个寄存器为2字节的16进制数据，每2个寄存器为一个完整的数据，数据高位在前，低位在后，数据格式为整数格式，以补码形式存放，为带正负的整数。例如：00000000H，表示0；  00000001H,表示1；  FFFFFFFFH,表示 -1； FFFFFFFEH,表示  -2.。

 **建议：**由于测量值的小数点位数设置好后，客户一般不会经常改变，可以只在开机时读取一次就可以。



#### 1.2.2程序设计思路

​		考虑一路测量值的处理办法

​		

### 1.3 设定伺服电机的转速？

### 1.4 扭矩功率转速

modbusRTU

测量速度：每秒25次

显示范围：

扭矩测量：-99999~99999N.m，显示取绝对值：0~99999N.m，小数点位置可设定

转速显示：0~99999，小数点位置可设定

功率显示：0～99999，小数点自动调节

![image-20230712215658825](F:\QT\project\swivelJoint20230801ni\readme_image\image-20230712215658825.png)



**注1：寄存器地址0000H~0005H为测量值寄存器，，每个测量值占用2个寄存器，共4个字节，此4个字节为带正负号的整型数据；寄存器地址0006H~0008H为小数点寄存器，例如0006H寄存器内容为1，表示第一路测量4个字节转化为10进制后，包含1位小数点，小数点范围为0~4。举例：假如接收到的测量寄存器数据为; 00 00  01 06   ,将四个字节16进制转化为10进制，为： 262 ，读出对应的小数点位数为2，则表示接收到的数据为2.62.** 

### 1.5 振动

振动通过485串口通信，出现问题：

发数据很快，qt将多个一起接收，未测试是否丢失数据；



画图显示方面：显示效果要求？



首先，对要获取的性能建立连接，

![IMG20230613101225](C:\Users\14542\Desktop\SwivelJoint\IMG20230613101225.jpg)

